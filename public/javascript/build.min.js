var href=location.origin;$(".walkman").hide();var audio=document.createElement("audio");audio.src="";audio.volume=.1;audio.autoPlay=!1;audio.preLoad=!0;audio.controls=!1;
$(".audio-container").on("click",".audio-active-place",function(){var a=$(this).attr("data-id");$.post(href+"/information",{trackId:a}).done(function(b){b=JSON.parse(b);$(".title").text(b.title);$(".author").text(b.executor);$(".btns-open-viewer").attr("data-id",b.id);audio.src="http://fonki.pro/plugin/sounds/uploads/"+b.ref;audio.play();$(".walkman").show()})});$("#track-continue").on("click",function(){$(this).hide(0,function(){audio.play();$("#track-pause").show()})});
$("#track-pause").on("click",function(){$(this).hide(0,function(){audio.pause();$("#track-continue").show()})});$("#timeline").on("input",function(){audio.currentTime=$(this).val()});audio.addEventListener("timeupdate",function(){$("#timeline").val(audio.currentTime)});audio.addEventListener("loadedmetadata",function(){$("#timeline").attr("step",audio.duration/100);$("#timeline").attr("max",audio.duration)});var viewopen=!1;
$(".btns-open-viewer").on("click",function(){var a=$(this).attr("data-id");viewopen=!viewopen;$("body").css("overflow",open?"hidden":"scroll");1==viewopen&&($(this).addClass("cc"),$.post(href+"/information",{trackId:a}).done(function(b){var a=JSON.parse(b);$(this).scrollTop(0);$(".viewer").show(0,function(){$(".viewer-text").html(a.words);$(".d-canvas").show();$(".walkman").addClass("viewer-on");$(".viewer-text > b").removeAttr("style")})}));0==viewopen&&($(this).removeClass("cc"),$(".viewer").hide(0,
function(){$(".walkman").removeClass("viewer-on")}),$(".d-canvas").hide(),$("body").css("overflow","scroll"))});$(".btn-close-walkman").on("click",function(){$(".viewer").hide();$(".walkman").hide();audio.src="";audio.currentTime=0;audio.pause()});
$("#load-more").on("click",function(){$.post(href+"/load",{lastId:10}).done(function(a){console.log(a);a=JSON.parse(a);$.each(a,function(a,c){var b='\n        <div class="audio">\n          <div class="audio-components">\n            <div class="audio-active-place" data-id="'+c.id+'">\n              <div class="audio-condition-off">\n                <img src="http://fonki.pro/plugin/sounds/img_albums/'+c.icon+'" alt="'+c.executor+'" class="audio-icon"/>\n                <div class="audio-description">\n                  <span class="audio-name">'+
c.title+'</span>\n                  <span class="audio-author">'+c.executor+'</span>\n                </div>\n                <div class="audio-acts-buttons">\n                  <button class="audio-btn-act"></button>\n                  <button class="audio-btn-act-background"></button>\n                 </div>\n              </div>\n            </div>\n            <div class="audio-control-buttons">\n              <button class="audio-btn-text"></button>\n              <button class="audio-btn-text-background"></button>\n            </div>\n          </div>\n        </div>\n      ';
$(".audio-container").append(b)})})});
